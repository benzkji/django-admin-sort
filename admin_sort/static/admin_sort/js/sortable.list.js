const SortableList=function(){'use strict';function a(){return(n=document.querySelector(".results"),!n)?void console.log("nolist"):void(n._list=n.querySelector("tbody"),n._rows=n._list.querySelectorAll(".row1, .row2"),1>n._rows.length||(g(),b(),n._list._widget=n,n.classList.add("sortable-list"),n._sortable=new Sortable(n._list,{draggable:p.draggable,handle:p.handle,ghostClass:"admin-sort-ghost",chosenClass:"admin-sort-chosen",onUpdate:d}),n._reorder=document.querySelector(p.reorder),n._reorder.addEventListener("click",c)))}function b(){let a,b;for(a=0;a<n._rows.length;++a)b=n._rows[a],b._drag=b.querySelector(p.handle),b._key=a,b._pk=b._drag.dataset.pk,b.classList.add(p.draggable.substr(1))}async function c(a){a&&a.preventDefault();const b=new FormData;b.append("csrfmiddlewaretoken",j),h(k.reordering);let c,d=await fetch(m.update,{method:"POST",body:b});d.ok?c=await d.json():console.warn("HTTP-Error: "+r.status),i(),window.location.reload()}async function d(a){if(a.oldIndex===a.newIndex)return;h(k.sorting);const b=a.item,c=a.newIndex,d=n.querySelectorAll(p.draggable),e=new FormData;e.append("csrfmiddlewaretoken",j),e.append("obj",b._pk),0===c?(e.append("position","left"),e.append("target",d[1]._pk)):(e.append("position","right"),e.append("target",d[c-1]._pk));let g,l=await fetch(m.update,{method:"POST",body:e});l.ok?g=await l.json():console.warn("HTTP-Error: "+r.status),f(),i()}function f(){const a=["row1","row2"];n._rows=n.querySelectorAll(p.draggable);for(let b=0;b<n._rows.length;++b)n._rows[b].classList.remove("row1","row2"),n._rows[b].classList.add(a[b%2])}function g(){o=document.createElement("div"),o.id="admin-sort-state",o.classList.add("admin-sort-state")}function h(a){o.innerHtml="<span class=\"msg\">"+a+"</span><span class=\"admin-sort-loader\"><span class=\"admin-sort-loader-inner\"></span></span>",n.appendChild(o)}function i(){o.remove()}let j,k,l,m,n,o;const p={draggable:".draggable-item",handle:".admin-sort-drag",reorder:"#admin-sort-reorder-link"};return function(a){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",a):a()}(a),{options:function(a){j=a.csrf,k=a.messages,l=a.pages,m=a.urls}}}();